# 数据合并节点文档
## 节点功能
数据合并节点（Merge Node）用于将多个输入端口的数据合并到一个输出端口中，支持以下特性：

- 多输入数据合并：可以从多个输入端口接收数据并合并到一个输出中
- 数据重命名：支持对输入数据的键名进行重命名
- 灵活的数据选择：通过表格界面可以选择需要合并的特定数据项
- 动态端口配置：支持编辑端口数量，默认提供5个输入端口
- 实时数据更新：当输入数据或表格配置变化时，自动更新输出数据
- 配置保存与加载：支持将合并配置保存到流程文件中并在加载时恢复
- 可调整大小：节点界面支持调整大小，方便查看和编辑数据映射表
## 输入端口
节点默认提供5个输入端口（可编辑）：

1. INPUT 0：第一个数据输入源
2. INPUT 1：第二个数据输入源
3. INPUT 2：第三个数据输入源
4. INPUT 3：第四个数据输入源
5. INPUT 4：第五个数据输入源
## 输出端口
节点提供1个输出端口：

1. OUTPUT 0：合并后的数据（包含所有选定并可能重命名的数据项）
## 节点界面
节点界面是一个可编辑的表格，包含以下列：

- ID：输入端口的索引（0-4，对应INPUT 0到INPUT 4）
- Name：要从输入数据中提取的键名
- Rename：（可选）输出时使用的新键名，如果为空则保持原键名
- Action：删除按钮，用于移除当前行
界面底部有一个"Add Row"按钮，用于添加新的数据映射行。

## 使用示例
### 示例1：基本数据合并
1. 添加数据合并节点到流程图
2. 将两个或多个数据源节点（如字符串源节点、整数源节点等）连接到合并节点的输入端口
3. 在表格中添加行，指定要合并的数据项：
   - 第一行：ID=0, Name="temperature", Rename="" (保持原名)
   - 第二行：ID=1, Name="humidity", Rename="" (保持原名)
4. 合并节点的输出将包含两个键值对："temperature"和"humidity"，值分别来自输入端口0和1
### 示例2：数据重命名
1. 添加数据合并节点到流程图
2. 将两个数据源节点连接到合并节点的输入端口0和1
3. 在表格中添加行，指定要合并的数据项并重命名：
   - 第一行：ID=0, Name="temp", Rename="temperature"
   - 第二行：ID=1, Name="hum", Rename="humidity"
4. 合并节点的输出将包含两个键值对："temperature"和"humidity"，尽管原始数据中的键名是"temp"和"hum"
### 示例3：从同一输入源提取多个数据项
1. 添加数据合并节点到流程图
2. 将一个包含多个键值对的VariableData源节点连接到合并节点的输入端口0
3. 在表格中添加多行，都使用同一个ID但不同的Name：
   - 第一行：ID=0, Name="temperature", Rename=""
   - 第二行：ID=0, Name="humidity", Rename=""
   - 第三行：ID=0, Name="pressure", Rename=""
4. 合并节点的输出将包含三个键值对，都来自输入端口0的不同数据项
## 注意事项
1. 输入数据必须是VariableData类型，否则节点将无法处理
2. 如果指定的Name在输入数据中不存在，该项将被忽略
3. 如果多行使用相同的Rename值（或原Name值），后面的值会覆盖前面的值
4. 表格中的更改会立即反映到输出数据中
5. 节点配置（表格内容）会随流程文件一起保存和加载
6. 可以通过拖动节点边缘调整节点大小，以便更好地查看和编辑表格
## 技术细节
- 节点使用QTableView和QStandardItemModel实现数据映射表格
- 使用QJsonObject保存和加载配置数据
- 支持动态添加和删除数据映射行
- 通过信号槽机制实现表格数据变化时的实时更新
- 使用std::unordered_map存储输入数据的引用
- 支持通过PortEditable属性动态调整端口数量