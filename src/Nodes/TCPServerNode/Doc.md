# TCP 服务器节点文档
## 节点功能
TCP服务器节点实现了TCP服务端通信功能，支持以下特性：

- 多客户端连接管理
- 数据收发分离通道
- 自动维护客户端连接状态
- 支持文本和二进制数据传输
- 客户端连接/断开事件通知
- 在独立线程中运行，不阻塞主UI线程
## 输入端口
节点提供了4个输入端口：

1. HOST ：服务器监听地址（字符串类型，如"0.0.0.0"表示监听所有网络接口）
2. PORT ：服务器监听端口号（整数类型，范围0-65535）
3. VALUE ：要广播给所有客户端的消息内容（字符串类型）
4. TRIGGER ：触发消息广播的信号（任意类型，收到数据即触发）
## 输出端口
节点提供了4个输出端口：

1. RESULT ：接收到的完整数据（VariableData类型，包含host、hex和default字段）
2. HOST ：发送数据的客户端地址（字符串类型）
3. VALUE ：接收到的原始数据（字符串类型）
4. HEX ：接收到的数据的十六进制表示（字符串类型）
## 节点界面
节点界面包含以下控件：

- host ：输入框，用于设置服务器监听地址，默认为"0.0.0.0"（监听所有网络接口）
- port ：数字输入框，用于设置服务器监听端口，范围0-65535，默认为2001
- value ：输入框，用于输入要广播给所有客户端的消息内容
- Send ：按钮，点击将消息广播给所有已连接的客户端
## 使用示例
### 示例1：基本服务器设置和广播消息
1. 添加TCP服务器节点到流程图
2. 在节点界面中设置监听地址（如"0.0.0.0"）和端口（如2001）
3. 在value输入框中输入要广播的消息
4. 点击Send按钮将消息发送给所有已连接的客户端
5. 从输出端口获取客户端发送的响应
### 示例2：通过其他节点控制TCP服务器
1. 添加TCP服务器节点和字符串源节点到流程图
2. 将字符串源节点的输出连接到TCP服务器节点的HOST输入端口，设置监听地址
3. 添加整数源节点，将其输出连接到TCP服务器节点的PORT输入端口，设置监听端口
4. 添加另一个字符串源节点，将其输出连接到TCP服务器节点的VALUE输入端口，设置要广播的消息
5. 添加按钮节点，将其输出连接到TCP服务器节点的TRIGGER输入端口，用于触发消息广播
6. 将TCP服务器节点的RESULT输出端口连接到数据信息节点，以查看接收到的数据

## 注意事项
1. 服务器会自动处理客户端的连接和断开，无需手动管理客户端连接
2. 发送消息时，消息会被广播给所有已连接的客户端
3. 接收到的数据会通过RESULT输出端口以VariableData格式输出，包含以下字段：
   - host：客户端地址
   - hex：数据的十六进制表示
   - default：原始数据
4. 可以通过OSC协议远程控制节点的参数（/send, /value）
5. 服务器在独立线程中运行，不会阻塞主UI线程
## 技术细节
- 节点使用QTcpServer和QTcpSocket实现TCP通信
- 支持多客户端同时连接
- 通信过程在单独的线程中运行，确保UI响应性
- 自动管理客户端连接状态，当客户端断开时自动清理资源