# SwitchNode 帮助文档
## 节点功能
输入切换节点（Switch Node）用于根据索引值选择不同的输入端口数据并输出，支持以下特性：

- 多输入数据切换：可以从多个输入端口中选择一个数据源进行输出
- 动态索引控制：支持通过专用索引端口或界面控件动态切换数据源
- 灵活的端口配置：支持编辑端口数量，默认提供3个输入端口
- 实时数据更新：当索引值或输入数据变化时，自动更新输出数据
- 配置保存与加载：支持将当前索引值保存到流程文件中并在加载时恢复
- OSC远程控制：支持通过OSC协议远程控制索引值（/index）
## 输入端口
节点默认提供3个输入端口（可编辑）：

1. INPUT 0：第一个数据输入源（VariableData类型）
2. INPUT 1：第二个数据输入源（VariableData类型）
3. INDEX：索引值（始终为最后一个端口），用于选择要输出的输入端口（整数类型，对应输入端口的索引）
注意：实际的输入端口数量可以通过节点的端口编辑功能进行调整，但最后一个端口始终是INDEX端口。

## 输出端口
节点提供1个输出端口：

1. OUTPUT 0：根据索引值选择的输入数据（VariableData类型，与选中的输入端口数据相同）
## 节点界面
节点界面包含一个数字输入框（QSpinBox），用于设置和显示当前的索引值。通过此控件可以手动选择要输出的输入端口。

## 使用示例
### 示例1：基本数据切换
1. 添加输入切换节点到流程图
2. 将多个数据源节点（如字符串源节点、整数源节点等）连接到切换节点的输入端口（INPUT 0, INPUT 1, ...）
3. 通过节点界面上的数字输入框调整索引值，选择要输出的数据源
4. 切换节点的输出将显示所选索引对应的输入端口数据
### 示例2：通过其他节点控制切换
1. 添加输入切换节点和整数源节点到流程图
2. 将多个数据源节点连接到切换节点的输入端口（INPUT 0, INPUT 1, ...）
3. 将整数源节点的输出连接到切换节点的INDEX输入端口
4. 通过调整整数源节点的值，动态控制切换节点的输出数据
### 示例3：创建多路选择器
1. 添加多个输入切换节点到流程图，形成多级选择结构
2. 将第一级切换节点的输出连接到第二级切换节点的输入端口
3. 使用不同的控制信号连接到各级切换节点的INDEX端口
4. 构建一个复杂的数据选择系统，可以根据多个条件选择不同的数据路径
## 注意事项
1. 索引值必须是有效的输入端口索引，否则输出可能为空或未定义
2. 当索引值超出有效范围时，节点不会输出任何数据
3. 输入数据必须是VariableData类型，否则节点将无法处理
4. 索引值从0开始计数，对应INPUT 0, INPUT 1, ...
5. 最后一个输入端口（INDEX）专用于控制索引值，不参与数据选择
6. 可以通过OSC协议远程控制索引值，路径为"/index"
## 技术细节
- 节点使用QSpinBox实现索引值的输入和显示
- 使用std::unordered_map存储输入数据的引用
- 通过NodeDelegateModel::registerOSCControl注册OSC控制接口
- 支持通过PortEditable属性动态调整端口数量
- 使用QJsonObject保存和加载索引值配置