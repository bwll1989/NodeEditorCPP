# LTCDecoderNode 帮助文档

## 概述
LTCDecoderNode 是一个LTC（Linear Time Code）时间码解码节点，负责从音频信号中解码SMPTE时间码数据，并输出小时、分钟、秒、帧等时间信息。

## 功能特性
- **LTC时间码解码**：基于libltc库实现高精度LTC时间码解析
- **实时处理**：10ms间隔的实时音频数据处理
- **时间码偏移**：支持时间码偏移调整功能
- **多格式支持**：支持PAL、NTSC等不同时间码格式
- **状态监控**：实时显示连接状态和解码状态
- **时间戳同步**：基于TimestampGenerator的精确时间同步

## 输入端口
- **端口类型**：AudioData
- **端口数量**：1个
- **数据格式**：支持AudioTimestampRingQueue共享缓冲区
- **音频格式**：16位有符号整数音频数据
- **采样率**：支持多种采样率（通常48kHz）

## 输出端口
- **端口数量**：5个
- **输出类型**：
  1. **FRAMES**：当前帧数（0-29/24）
  2. **SECONDS**：当前秒数（0-59）
  3. **MINUTES**：当前分钟数（0-59）
  4. **HOURS**：当前小时数（0-23）
  5. **TOTAL FRAMES**：总帧数

## 界面组件
- **时间码显示**：实时显示解码得到的时间码（HH:MM:SS:FF格式）
- **时间码类型标签**：显示当前时间码格式（PAL/NTSC等）
- **状态标签**：显示当前连接和解码状态
  - "Disconnected"：未连接音频源
  - "Connected"：已连接音频源
  - "Decoding"：正在解码时间码
- **偏移调整**：SpinBox控件用于调整时间码偏移值

## 技术实现
- **解码库**：libltc（Linear Timecode library）
- **音频处理**：使用ltc_decoder_write_s16处理16位音频数据
- **定时器机制**：QTimer实现10ms间隔的音频数据处理
- **缓冲管理**：基于AudioTimestampRingQueue的音频缓冲区管理
- **信号连接**：通过Qt信号槽机制处理解码结果

## 使用说明
1. 将包含LTC时间码的音频源连接到输入端口
2. 节点会自动开始解码音频中的时间码信息
3. 通过界面可以实时查看解码得到的时间码
4. 可以通过偏移调整功能修正时间码偏差
5. 各个输出端口提供分离的时间分量供其他节点使用

## 配置保存
- **偏移值**：时间码偏移设置会自动保存到项目文件中
- **时间码格式**：默认使用PAL格式（25fps）

## 注意事项
- 确保输入的音频信号包含有效的LTC时间码
- LTC信号通常需要足够的音频电平才能正确解码
- 音频采样率建议使用48kHz以获得最佳解码精度
- 时间码格式需要与音频源的实际格式匹配
- 解码精度受音频质量和噪声水平影响

## 故障排除
- **无法解码时间码**：检查音频信号是否包含LTC时间码，调整音频电平
- **时间码不准确**：使用偏移调整功能进行校正
- **连接状态异常**：确认音频源节点正常工作并已正确连接
- **解码中断**：检查音频流是否连续，避免音频缓冲区溢出