# OSCOutNode 帮助文档
## 节点功能
OSC输出节点用于通过OSC（Open Sound Control）协议发送消息到远程设备或应用程序，支持以下特性：

- 远程设备通信 ：可配置目标主机地址和端口，支持发送OSC消息到任何支持OSC协议的设备或应用程序
- 多种数据类型 ：支持发送整数、浮点数和字符串三种基本数据类型
- 灵活的触发方式 ：支持手动触发（通过界面按钮）和自动触发（通过输入端口）两种发送模式
- OSC地址路径 ：可自定义OSC地址路径，便于接收端识别和处理消息
- 实时数据转换 ：自动将输入数据转换为适当的OSC格式
- 独立线程处理 ：网络操作在独立线程中执行，不阻塞主UI线程
- 消息队列机制 ：使用队列管理OSC消息，确保高效稳定的消息发送
- 远程控制支持 ：通过registerOSCControl注册控件，支持远程OSC控制节点参数
## 输入端口
端口索引 名称 说明 0 HOST 目标主机地址（如："192.168.1.100"） 1 PORT 目标端口号（默认：6001） 2 ADDRESS OSC地址路径（如："/test"） 3 VALUE 要发送的数据值（支持多种数据类型） 4 TRIGGER 触发发送（布尔值，上升沿触发）

## 输出端口
此节点没有输出端口。

## 节点界面
节点提供了直观的用户界面，包含以下元素：

- Host ：输入框，用于设置目标主机地址
- Port ：数字输入框，用于设置目标端口（范围：1000-66535，默认：6001）
- Address ：输入框，用于设置OSC地址路径（默认："/test"）
- Type ：下拉菜单，用于选择数据类型（Int、Float、String）
- Value ：输入框，用于输入要发送的数据值
- Send ：按钮，点击手动触发消息发送
## 使用示例
### 基本设置和发送
1. 添加OSC输出节点到工作区
2. 设置目标主机地址（如："127.0.0.1"）和端口（如：8000）
3. 设置OSC地址路径（如："/fader1"）
4. 选择数据类型（如：Float）
5. 输入要发送的值（如：0.5）
6. 点击Send按钮发送消息
### 通过其他节点控制
1. 将浮点源节点（FloatSourceNode）连接到OSC输出节点的VALUE端口
2. 将布尔源节点（BoolSourceNode）连接到OSC输出节点的TRIGGER端口
3. 当布尔源节点输出true时，OSC输出节点将自动发送浮点源节点的当前值
### 创建OSC控制系统
1. 设置多个OSC输出节点，每个节点对应不同的控制参数
2. 使用不同的OSC地址路径区分不同的控制目标（如："/light/1/intensity"、"/light/1/color"）
3. 将各种数据源节点连接到相应的OSC输出节点
4. 构建一个完整的OSC控制系统，用于控制灯光、音频、视频等设备
## 注意事项
- 网络连接 ：确保目标设备可访问且端口开放，否则消息将无法送达
- 数据类型 ：发送前确保选择了正确的数据类型，以便接收端正确解析
- 地址格式 ：OSC地址路径应遵循OSC规范，通常以"/"开头，如"/device/parameter"
- 防火墙设置 ：如果消息无法发送，检查防火墙是否阻止了UDP通信
- VariableData转换 ：节点会自动将VariableData类型转换为适当的OSC数据类型
- 独立线程 ：OSC消息在独立线程中发送，不会阻塞UI，但可能需要考虑线程安全性
- 消息队列 ：高频率发送大量消息时，会使用队列机制，可能导致轻微延迟
- 远程控制 ：节点支持通过OSC协议远程控制其参数，可用于双向通信
## 技术细节
- 使用QUdpSocket实现UDP通信，支持IPv4网络
- 基于tinyosc库构建和解析OSC消息
- 使用QThread在独立线程中处理网络操作
- 支持OSC基本数据类型：整数(i)、浮点数(f)、字符串(s)
- 使用QVariant实现灵活的数据类型转换
- 支持通过NodeDelegateModel::registerOSCControl注册OSC控制接口
- 消息队列使用QMutex和QQueue实现线程安全的消息管理
- 定时器定期处理队列中的消息，默认间隔为16毫秒