# USR-IO808 帮助文档

## 概述

USR-IO808节点是一个基于Modbus TCP协议的主机节点，用于控制USR-IO808工业级IO控制器。它实现了完整的Modbus TCP主机功能，可以与支持Modbus TCP协议的从站设备进行通信，实现对8路数字输入(DI)和8路数字输出(DO)的控制和监控。

## 输入端口

- **DO 0-7**: 8个数字输出控制端口，用于控制USR-IO808的8路数字输出。

## 输出端口

- **DI 0-7**: 8个数字输入状态端口，用于监控USR-IO808的8路数字输入状态。

## 界面

节点界面包含以下部分：

1. **连接设置**：
   - IP地址：USR-IO808设备的IP地址（默认：127.0.0.1）
   - 端口：USR-IO808设备的TCP端口（默认：8080）
   - ServerID：Modbus服务器ID（默认：1，标注为Useless表示在当前实现中未使用）

2. **DI状态显示 (0x0020~0x0027)**：
   - 显示8路数字输入的实时状态（开/关）
   - 绿色表示"开"状态，灰色表示"关"状态
   - 地址范围：0x0020到0x0027

3. **DO控制 (0x0000~0x0007)**：
   - 8个复选框用于控制数字输出状态
   - 地址范围：0x0000到0x0007
   - 仅在连接成功后启用

4. **Read All按钮**：
   - 手动触发读取所有输入和输出状态
   - 仅在连接成功后启用

5. **连接状态指示器**：
   - 显示当前连接状态（已连接/未连接）
   - 绿色表示已连接，红色表示未连接

## 使用示例

### 示例1：连接USR-IO808设备并控制DO输出

1. 添加USR-IO808节点到流程图
2. 在节点界面中设置设备IP地址和端口
3. 设备连接成功后，界面会自动显示"状态: 已连接"
4. 使用界面上的DO复选框控制相应的数字输出
5. 观察DI状态显示数字输入的实时状态
6. 点击"Read All"按钮手动同步所有数据

### 示例2：通过其他节点控制USR-IO808设备

1. 添加USR-IO808节点和布尔源节点到流程图
2. 将布尔源节点的输出连接到USR-IO808节点的DO输入端口
3. 通过布尔源节点控制USR-IO808设备的数字输出
4. 将USR-IO808节点的DI输出端口连接到数据显示节点，监控数字输入状态

## 技术细节

### Modbus TCP协议实现

- **协议标准**：完全符合Modbus TCP协议规范
- **事务处理**：支持事务标识符管理，确保请求响应匹配
- **功能码支持**：
  - 0x01：读取线圈状态（DO状态读取）
  - 0x02：读取离散输入状态（DI状态读取）
  - 0x05：写单个线圈（单个DO控制）
  - 0x0F：写多个线圈（多个DO控制）

### 地址映射

- **DO地址范围**：0x0000~0x0007（8个线圈）
- **DI地址范围**：0x0020~0x0027（8个离散输入）

### 自动化功能

- **自动连接管理**：支持连接状态监控和自动重连
- **定时读取**：连接成功后每秒自动读取一次所有状态
- **实时更新**：输入输出状态实时同步显示
- **数据持久化**：支持保存和加载连接配置及输出状态

### 通信协议详解

#### Modbus TCP帧格式

所有命令都遵循标准Modbus TCP帧格式：
